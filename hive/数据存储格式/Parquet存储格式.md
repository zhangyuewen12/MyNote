Parquet 是 Hadoop 的一种开源文件格式，以扁平列格式存储嵌套数据结构。



### Parquet文件格式优点

- 与以行方式存储数据的传统方法相比，Parquet文件格式在存储和性能方面更高效。
- 这对于从“宽”（具有许多列）表中读取特定列的查询特别有用，因为只读取需要的列，并且最小化 IO。
- Parquet的独特功能之一是它也可以以柱状方式存储具有嵌套结构的数据。这意味着在 Parquet 文件格式中，即使是嵌套字段也可以单独读取，而无需读取嵌套结构中的所有字段。Parquet 格式使用记录分解和组装算法以柱状方式存储嵌套结构。



### Parquet 文件格式结构组成

<img src="/Users/zyw/Library/Application Support/typora-user-images/image-20220424135942743.png" alt="image-20220424135942743" style="zoom:50%;" />



- **Header：** 包含一个幻数“PAR1”（4 字节），用于将文件标识为 Parquet 格式文件。

- **Row group（行组）**：将数据逻辑水平划分为行。行组由数据集中每一列的列块组成。

- **Column chunk（列块）**：特定列的数据块。这些列块存在于特定的行组中，并保证在文件中是连续的。

- **Page（页面）**：列块被分成背靠背写的页面。这些页面共享一个标准标题，读者可以跳过他们不感兴趣的页面。

- **Footer（页脚）：**

- - 文件元数据- 文件元数据包含所有列元数据起始位置的位置。它还包括格式版本、架构和任何额外的键值对。读者应该首先读取文件元数据以找到他们感兴趣的所有列块。然后应该顺序读取列块。
  - 文件元数据的长度（4 字节）

- 

- ![img](https://pic1.zhimg.com/v2-b4924093da8f721b3c01093538ecbab4_b.webp)