# 集线器(hub)

## 1.1 功能概述

一个口收到信号，原封不动的发送到所有其他的口，类似于广播。其他的口接收到信号后，自己决定是否处理。有点类似于广播，但是别广播更纯粹，由于Hub只是简单的转发，所以hub工作在物理层（L1）.

## 1.2 工作原理

HUB 集线器就是一种共享设备,HUB本身不能识别目的地址,当同一局域网内的A主机给B主机传输数据时,数据包在以HUB为架构的网络上是以广播方式传输的,由每一台终端通过验证数据包头的地址信息来确定是否接收。也就是说,在这种工作方式下,同一时刻网络上只能传输一组数据帧的通讯,如果发生碰撞还得重试。



**集线器属于纯硬件网络底层设备**，基本上不具有类似于交换机的"智能记忆"能力和"学习"能力。它也不具备交换机所具有的MAC地址表，所以它发送数据时都是没有针对性的，而是采用广播方式发送。也就是说当它要向某节点发送数据时，不是直接把数据发送到目的节点，而是把数据包发送到与集线器相连的所有节点**.集线器（HUB）属于数据通信系统中的基础设备，**它和双绞线等传输介质一样，是一种不需任何软件支持或只需很少管理软件管理的硬件设备。它被广泛应用到各种场合。

<img src="/Users/zyw/Library/Application Support/typora-user-images/image-20210721100333214.png" alt="image-20210721100333214" style="zoom:50%;" />

## 1.3 优缺点

优点包括：

- 集线器的重要功能就在于连接多个不同的局域网，将这些集中到单一的设备商来，并且让这个设备来负责联通这些链接的位置。集线器是一个集中式、广播式的中继设备，能够接受两端不同的信号，并且将信号复制、放大后传送到相对的另一端
- 集线器价格便宜，组网灵活。集线器使用星型布线，如果一个工作站出现问题，不会影响整个网络的正常运行。

缺点包括：

- 集线器不具备交换功能
- 一般集线器对数据包的处理大部分都是简单地将数据包复制并放大后，送到目前连接该集线器的各县设备商，因此数据包充斥在整个连通的局域网中，同时仅有一组数据交换的信号，所以在数据包传输量较大的居于网中，集线器将无法有效地传输数据，因为可能同时传送多份数据，从而造成数据包的冲突问题问题增加。

# 网桥(bridge)

## 2.1 功能概述

工作在数据链路层（L2）.以太网中，数据链路层地址就是mac地址，网桥和Hub的区别在于，网桥会过滤mac，只有目的mac地址匹配的数据才会发送到出口。一个Bridege指的是一个输入到一个输出的桥接。

**网桥（Bridge）是早期的两端口数据链路层网络设备**，用来连接不同网段的计算机网络设备同时它又可隔离冲突域，因为它的两个端口不是共享一条背板总线（分别有一条独立的交换信道），比当时的集线器（Hub）性能更好（集线器上各端口都是共享同一条背板总线的）。后来，网桥被具有**更多端口**、同时也可隔离冲突域的交换机（Switch）所取代。

网桥将两个相似的网络连接起来，并对网络数据的流通进行管理。它工作于数据链路层，不但能扩展网络的距离或范围，而且可提高网络的性能、可靠性和安全性。

网络1 和网络2 通过网桥连接后，**网桥接收网络1 发送的数据包，检查数据包中的地址，如果地址属于网络1 ，它就将其放弃**，相反，如果是网络2 的地址，它就继续发送给网络2.这样网络1的数据就不会传到别的网络中。

这样可利用网桥隔离信息，将同一个网络号划分成多个网段（属于同一个网络号），隔离出安全网段，防止其他网段内的用户非法访问。由于网络的分段，各网段相对独立（属于同一个网络号），一个网段的故障不会影响到另一个网段的运行。

<img src="/Users/zyw/Library/Application Support/typora-user-images/image-20210721100816064.png" alt="image-20210721100816064" style="zoom:50%;" />

# 交换机(switch)

早期的交换机可以看成是多个网桥的集成设备。因此也工作在数据链路层，一个交换机口的输入到另外一个交换机口的输出，可以看成是一个bridge。交换机的mac table，实际上为了Bridge能工作而存在。

## 3.1 功能概述

交换机（Switch）可以说同时是集线器和网桥的升级换代产品，因为交换机具有集线器一样的集中连接功能，同时它又具有网桥的数据交换功能。所以可以这样说，交换机是带有交换功能的集线器，或者说交换机是多端口的网桥。外形上，集线器与交换机产品没什么太大区别。

<img src="/Users/zyw/Library/Application Support/typora-user-images/image-20210721101640296.png" alt="image-20210721101640296" style="zoom:50%;" />

## 3.2 工作原理

工作原理与网桥类似，总结如下：

1. 当交换机从某个端口收到一个数据帧后，先读取帧头部的源MAC 地址，并与自己缓存中的映射表（CAM 表）进行比较，如果没有找到，则在CAM 表中添加一个该源MAC 地址与发送该帧的源端口映射表项。这就是交换机的MAC 地址自动学习功能。
2. 如果在CAM 表项查到了帧中**源MAC 地址**，则继续查看是否有帧中**目的MAC 地址**所对应的映射表项。如果有，则直接**把该帧转发到目的MAC 地址节点所连接的交换机端口**，然后由该端口发送到目的主机。
3. 如果在交换机CAM 表中没有找到帧中目的MAC 地址所对应的表项，则把该数据帧**向除源端口外的其他所有端口上进行泛洪**。
4. 当MAC 地址与帧中目的MAC 地址一致的主机接收了该数据帧后就会向源主机产生一个**应答帧**，交换机获取该应答帧后从其中的源MAC 地址中获取了对应的MAC 地址和所连接端口的映射关系，并添加到CAM 表中。这样下次再有MAC 地址为这个MAC 地址的帧发送时交换机就可以直接从CAM 表中找到对应的转发端口，直接转发，不用再泛洪了。



# 路由器(router)

工作在网络层(L3),基于IP地址做转发.



>容易混淆的是网桥和交换机的概念，现在普遍认为的交换机可以同时具有bridging和routing两种功能。

# 网关

## 5.1 功能概述

网关(Gateway)又称网间连接器、协议转换器。网关在网络层以上实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连，网关既可以用于广域网互连，也可以用于局域网互连。

网关是用于连接网络层之上执行不同协议的子网，组成异构的互连网，网关能实现异构设备之间的通信，对不同的传输层、会话层、表示层、应用层协议进行翻译和变换。网关具有对不兼容的高层协议进行转换的功能。当连接两个完全不同结构的网络时，必须使用网关。网关工作在OSI模型的最高层应用层。**网关的主要功能：把一种协议变成另一种协议，把一种数据格式变成另一种数据格式，把一种速率变成另一种速率，以求两者的统一。**

**从根本上说，网关不能完全归为一种网络硬件。用概括性的术语来讲，它们应该是能够连接不同网络的软件和硬件的结合产品。**特别地，它们可以使用不同的格式、通信协议或结构连接起两个系统。网关实际上通过重新封装信息以使它们能被另一个系统读取。为了完成这项任务，网关必须能运行在O S I 模型的几个层上。网关必须同应用通信，建立和管理会话，传输已经编码的数据，并解析逻辑和物理地址数据。

**‘网关’一个大概念，不具体特指一类产品，只要连接两个不同的网络的设备都可以叫网关**；而‘路由器’么一般特指能够实现路由寻找和转发的特定类产品，路由器很显然能够实现网关的功能。当然电信行业说的‘路由器’又和家用的‘路由器’两个概念，这个暂且不表

## 5.2 默认网关是什么？

> 默认网关是什么，默认网关事实上不是一个产品而是一个网络层的概念，PC本身不具备路由寻址能力，所以PC要把所有的IP包发送到一个默认的中转地址上面进行转发，也就是默认网关。这个网关可以在路由器上，可以在三层交换机上，可以在防火墙上，可以在服务器上，所以和物理的设备无关。

## 5.2 网关 VS 路由器

> 网关和路由器最大的区别是是否连接相似的网络。如果连接相似的网络，则称为路由器。而连接不相似的网络，称为网关

