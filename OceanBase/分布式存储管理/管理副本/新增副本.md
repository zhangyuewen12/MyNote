# 新增副本

您可以通过 OCP 为租户新增副本。

## 使用限制

如果租户已在所属集群的全部 Zone 上设置了副本，则不支持再新增副本。

## 通过 SQL 语句新增副本

### 创建资源单元的 SQL 语法

```sql
CREATE RESOURCE UNIT unit_name 
MAX_CPU [=] cpu_num, 
MAX_MEMORY [=] mem_size, 
MAX_IOPS [=] iops_num, 
MAX_DISK_SIZE [=] disk_size, 
MAX_SESSION_NUM [=] session_num, 
[MIN_CPU [=] cpu_num,]
[MIN_MEMORY [=] mem_size,] 
[MIN_IOPS [=] iops_num];
```

### 创建资源池的 SQL 语法

```sql
CREATE RESOURCE POOL poolname 
UNIT [=] unitname, 
UNIT_NUM [=] unitnum, 
ZONE_LIST [=] ('zone' [, 'zone' ...]);
```

### 为租户添加资源池的 SQL 语法

```sql
ALTER TENANT tenant_name
RESOURCE_POOL_LIST [=](poolname [, poolname...]);
```

### 为租户添加副本的 SQL 语法

```sql
ALTER TENANT tenant_name LOCALITY [=] 'locality_description';
```

### 示例

tenant1 租户当前只有 zone1 上的一个副本，现需要为其在 zone2 上新增一个副本。修改租户 `tenant1` 的 Locality，增加副本数的 SQL 语句如下所示：

1. 创建资源单元。

   ```sql
   obclient> CREATE RESOURCE UNIT unit1 MAX_CPU 4, MAX_MEMORY '5G', MAX_IOPS 128,MAX_DISK_SIZE '10G', MAX_SESSION_NUM 64, MIN_CPU=4, MIN_MEMORY= '5G', MIN_IOPS=128;
   ```

2. 在 zone2 上创建资源池。

   ```sql
   obclient> CREATE RESOURCE POOL pool2 UNIT='unit1', UNIT_NUM=1, ZONE_LIST=('zone2');
   ```

3. 为 tenant1 添加 zone2 上的资源池。

   ```sql
   obclient> ALTER TENANT tenant1 resource_pool_list=('pool1','pool2');
   ```

4. 为 tenant1 添加 zone2 上的全能型副本。

   ```sql
   obclient> ALTER TENANT tenant1 locality='F@zone1,F@zone2';
   ```